"use strict";function Galeria(e,i,t){var n=this,u={},o=navigator.camera,a=null,c=["mp4","m4v","m4a","mov"];if(u.tipoArquivo=o.MediaType.ALLMEDIA,u.tipoRetorno=o.DestinationType.DATA_URL,u.imgExtencao=o.EncodingType.JPEG,u.imgExtTexto="jpg",u.vidExtencao=VideoEditorOptions.OutputFileType.MPEG4,n.qualidade=t||80,n.editar=!1,n.girar=!0,n.larguraVideo=1280,n.alturaVideo=720,n.videoBitrate=1e6,n.videoFp2=24,n.alturaThumb=320,n.larguraThumb=480,e)switch(e.toLowerCase()){case"foto":case"imagem":case"img":u.tipoArquivo=o.MediaType.PICTURE;break;case"video":case"vid":u.tipoArquivo=o.MediaType.VIDEO}if(i)switch(i.toLowerCase()){case"file_url":case"file_uri":case"path":case"url":u.tipoRetorno=o.DestinationType.FILE_URI;break;case"native_url":case"native_uri":case"path_nativo":case"url_nativa":u.tipoRetorno=o.DestinationType.NATIVE_URI}function r(i,t){var e;null!=a?t(a):(e={quality:n.qualidade,mediaType:u.tipoArquivo,destinationType:u.tipoRetorno,allowEdit:n.editar,sourceType:i,encodingType:u.imgExtencao,correctOrientation:n.girar},o.getPicture(function(e){t(e,i)},function(e){t({error:e})},e))}function p(e,i,o){var a,t,r;!e.error&&(r=(r=e.split("."))[r.length-1].toLowerCase(),0==u.tipoRetorno)?0==u.tipoArquivo?(t="data:"+app.getMimeType(u.imgExtTexto)+";base64,"+e,o(t)):1==u.tipoArquivo||-1<c.indexOf(r)?(a=(e=s(e)).split("/"),r={fileUri:e,outputFileName:"ed"+(a=a[a.length-1]),outputFileType:u.vidExtencao,optimizeForNetworkUse:VideoEditorOptions.OptimizeForNetworkUse.YES,saveToLibrary:!1,maintainAspectRatio:!0,width:n.larguraVideo,height:n.alturaVideo,videoBitrate:n.videoBitrate,fps:n.videoFp2,progress:function(e){}},VideoEditor.transcodeVideo(function(t){var e={fileUri:t=s(t),outputFileName:"tb"+a,width:n.alturaThumb,height:n.larguraThumb,quality:n.qualidade};VideoEditor.createThumbnail(function(e){e=s(e),d(e,function(i){d(t,function(e){o([e,i])})})},function(e){console.log("Erro ao obter a Thumb do vídeo "+e),o(t)},e)},function(e){o({error:e})},r)):0==i&&app.isPlatform("android")?(e=s(e),d(e,o)):(t="data:"+app.getMimeType(u.imgExtTexto)+";base64,"+e,o(t)):o(e)}var d=function(e,i){getBlob(e,function(e){Blob2Base64(e,function(e){i(e)})})},s=function(e){return app.isPlatform("android")&&-1==e.indexOf("file://")?"file://"+e:-1==e.indexOf("file:///private")?"file:///private"+e:e};n.setImgExtencao=function(e){switch(e.toLowerCase()){case"png":u.imgExtencao=o.EncodingType.PNG;break;case"jpg":case"jpeg":u.imgExtencao=o.EncodingType.JPEG;break;default:a={error:"Extenção "+e+" não reconhecida!"}}u.imgExtTexto=e.toLowerCase()},n.setOptions=function(e){for(var i in e)n[i]=e[i];return!0},n.abrirGaleria=function(t){r(o.PictureSourceType.PHOTOLIBRARY,function(e,i){p(e,i,t)})},n.tirarFoto=function(t){r(o.PictureSourceType.CAMERA,function(e,i){p(e,i,t)})}}