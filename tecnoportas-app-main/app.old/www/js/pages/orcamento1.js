"use strict";var orcamento1={informacoesDoFormulario:null,todosOsClientes:null,clienteSelecionado:0,btnVoltar:null,clientesAlterados:null,origem:null,dados:null,inicializar:function(o){app.securityCheck(),app.backButtonStatus=!0,this.informacoesDoFormulario={},this.adicionaEventoBotoes(),this._pegarClientes(),this.btnVoltar=app.E("btnVoltar"),this.tipoF=app.E("tipof"),this.tipoJ=app.E("tipoj"),this.radTipoChange(),this.tipoF.addEventListener("change",this.radTipoChange),this.tipoJ.addEventListener("change",this.radTipoChange),this.btnVoltar.addEventListener("click",app.onBackButtonClick),new VarGlobal("informacoesGlobaisDeOrcamento").salvarLocal(null),o?(console.log(o),this.origem=o.origem,this.dados=o.dados,"carrinho"==this.origem&&(app.E(".row")[0].style.display="none")):console.log("nada")},radTipoChange:function(){tipof.checked?(labNome.innerHTML="Nome: *",labSobrenome.innerHTML="Sobrenome:"):tipoj.checked&&(labNome.innerHTML="Raz√£o Social: *",labSobrenome.innerHTML="Nome Fantasia:")},adicionaEventoBotoes:function(){app.E("#seMeusClientes").addEventListener("change",function(){console.log(app.E("#seMeusClientes").value),orcamento1._checandoUsuarioEscolhido()}),app.E("#formClienteSubmit").addEventListener("submit",function(o){o.preventDefault();var e;orcamento1.pegaInformacoesDoFormulario(),0<orcamento1.clienteSelecionado?(orcamento1.configuraParaVarGlobal(),orcamento1._checarAlteracaoFormulario(),"carrinho"==orcamento1.origem?app.abrirPag("orcamento9",[{origem:orcamento1.origem,dados:{cliDados:orcamento1.todosOsClientes[orcamento1.clienteSelecionado],dados:orcamento1.dados}}],!1):app.abrirPag("orcamento2",[],!1)):((e={cli:{nome:orcamento1.informacoesDoFormulario.nome,sobrenome:orcamento1.informacoesDoFormulario.sobrenome,email:orcamento1.informacoesDoFormulario.email,ddd:orcamento1.informacoesDoFormulario.ddd,numero:orcamento1.informacoesDoFormulario.telefone,tipo:orcamento1.informacoesDoFormulario.tipoPessoa},end:{cidade:orcamento1.informacoesDoFormulario.cidade,uf:orcamento1.informacoesDoFormulario.estado}}).serralheiro_id=app.thisUser[0].pessoa_id,console.log(e),new Api("clientes/novo",e).send(function(o){o.error||o&&(o={id:o.cliente_id,tipoPessoa:e.cli.tipo,nome:e.cli.nome,sobrenome:e.cli.sobrenome,ddd:e.cli.ddd,telefone:e.cli.telefone,email:e.cli.email,estado:e.end.uf,cidade:e.end.cidade},orcamento1.informacoesDoFormulario.cliDds=o,new VarGlobal("informacoesGlobaisDeOrcamento").salvarLocal(JSON.stringify(orcamento1.informacoesDoFormulario)),"carrinho"==orcamento1.origem?app.abrirPag("orcamento9",[{origem:orcamento1.origem,dados:{cliDados:orcamento1.informacoesDoFormulario,dados:orcamento1.dados}}],!1):app.abrirPag("orcamento2",[orcamento1.informacoesDoFormulario],!1))}))})},_editarCliente:function(){var o=app.E("#seMeusClientes").value,o=orcamento1.todosOsClientes[o],e={cli:{nome:orcamento1.informacoesDoFormulario.nome,sobrenome:orcamento1.informacoesDoFormulario.sobrenome,email:orcamento1.informacoesDoFormulario.email,ddd:orcamento1.informacoesDoFormulario.ddd,numero:orcamento1.informacoesDoFormulario.telefone,tipo:orcamento1.informacoesDoFormulario.tipoPessoa},end:{cidade:orcamento1.informacoesDoFormulario.cidade,uf:orcamento1.informacoesDoFormulario.estado}};e.cliente_id=o.id,console.log(e),new Api("clientes/editar",e).send(function(o){o.error||o&&(orcamento1.configuraParaVarGlobal(),app.abrirPag("orcamento2",[orcamento1.informacoesDoFormulario],!1))})},_checandoUsuarioEscolhido:function(){var o=app.E("#seMeusClientes").value;orcamento1._adicionandoDadosClienteAosCampos(o),orcamento1.clienteSelecionado=o},_adicionandoDadosClienteAosCampos:function(o){o=orcamento1.todosOsClientes[o];console.log(o),"F"==o.tipo?app.E("#tipof").checked=!0:app.E("#tipoj").checked=!0,app.E("#nome").value=o.nome,app.E("#sobrenome").value=o.sobrenome,app.E("#ddd").value=o.ddd,app.E("#telefone").value=o.numero,app.E("#email").value=o.email,app.E("#cidade").value=o.cidade,app.E("#estado").value=o.uf},configuraParaVarGlobal:function(){orcamento1.informacoesDoFormulario.cliDds=orcamento1.todosOsClientes[orcamento1.clienteSelecionado],new VarGlobal("informacoesGlobaisDeOrcamento").salvarLocal(JSON.stringify(orcamento1.informacoesDoFormulario))},pegaInformacoesDoFormulario:function(){orcamento1.informacoesDoFormulario={tipoPessoa:(app.E("#tipoj").checked?app.E("#tipoj"):app.E("#tipof")).value,nome:app.E("#nome").value,sobrenome:app.E("#sobrenome").value,ddd:app.E("#ddd").value,telefone:app.E("telefone").value,email:app.E("#email").value,estado:app.E("#estado").value,cidade:app.E("#cidade").value}},_checarAlteracaoFormulario:function(){orcamento1.pegaInformacoesDoFormulario(),orcamento1._checandoUsuarioEscolhido();var o=orcamento1.todosOsClientes[app.E("#seMeusClientes").value],e=orcamento1.informacoesDoFormulario;orcamento1.clientesAlterados=new Object,o.nome!=e.nome&&Object.assign(orcamento1.clientesAlterados,{nome:e.nome}),o.sobrenome!=e.sobrenome&&Object.assign(orcamento1.clientesAlterados,{sobrenome:e.sobrenome}),o.ddd!=e.ddd&&Object.assign(orcamento1.clientesAlterados,{ddd:e.ddd}),o.numero!=e.telefone&&Object.assign(orcamento1.clientesAlterados,{numero:e.telefone}),o.email!=e.email&&Object.assign(orcamento1.clientesAlterados,{email:e.email}),o.uf!=e.estado&&Object.assign(orcamento1.clientesAlterados,{uf:e.estado}),o.cidade!=e.cidade&&Object.assign(orcamento1.clientesAlterados,{cidade:e.cidade}),o.tipo!=e.tipoPessoa&&Object.assign(orcamento1.clientesAlterados,{tipo:e.cidade}),0<Object.keys(orcamento1.clientesAlterados).length&&orcamento1._editarCliente(),console.group(),console.info(e),console.log(o),console.log(orcamento1.clientesAlterados),console.groupEnd()},_pegarClientes:function(){orcamento1.todosOsClientes=new Array,new Api("clientes?sid="+app.thisUser[0].pessoa_id).send(function(o){if(!o.error&&0<o.length){orcamento1.todosOsClientes[0]={cidade:"",ddd:"",email:"",id:"",nome:"Novo Cliente",numero:"",sobrenome:"",tipo:"F",uf:"Acre"},orcamento1._criarClientes(orcamento1.todosOsClientes[0],0,"#seMeusClientes");for(var e=0;e<o.length;e++){var a=o[e];orcamento1.todosOsClientes[e+1]=a,orcamento1._criarClientes(a,e+1,"#seMeusClientes")}}})},_criarClientes:function(o,e,a){e=app.CE("option",{value:e});e.innerHTML=o.nome+" "+o.sobrenome,orcamento1._inserirClientes(e,a)},_inserirClientes:function(o,e){app.E(e).appendChild(o)},_verificarCampoVazio:function(){var o=app.E(".box-input");console.log(o.length);for(var e=0;e<o.length;e++){var a=o[e];if(1==a.children[1].children.length&&""==a.children[1].children[0].value&&!a.classList.contains("is-invalid"))return a.classList.add("is-invalid"),!1;if(1<a.children[1].children.length)for(var n=0;n<a.children[1].children.length;n++)if(!a.children[1].lastElementChild.lastElementChild&&"INPUT"==a.children[1].children[n].nodeName&&""==a.children[1].children[0].value&&!a.classList.contains("is-invalid"))return a.classList.add("is-invalid"),!1}return!0},_removeIsInvalid:function(){for(var o=app.E(".box-input"),e=0;e<o.length;e++)o[e].classList.remove("is-invalid")}};