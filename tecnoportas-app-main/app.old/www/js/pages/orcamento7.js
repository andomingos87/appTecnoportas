"use strict";var orcamento7={pintura:null,tmpDados:null,opcSim:null,opcNao:null,divPinturas:null,btnAvancar:null,fita:null,btnVoltar:null,inicializar:function(o){app.securityCheck(),console.log(o),this.tmpDados=o,this.divPinturas=app.E("divPinturas"),this.opcSim=app.E("opcSim"),this.opcNao=app.E("opcNao"),this.btnAvancar=app.E("btnAvancar"),this.btnVoltar=app.E("btnlVoltar"),this.opcSim.addEventListener("click",this.opcSimClick),this.opcNao.addEventListener("click",this.opcNaoClick),this.btnAvancar.addEventListener("click",this.btnAvancarClick),this.btnVoltar.addEventListener("click",app.onBackButtonClick)},getPinturas:function(){var n=this;new Api("portoes/pinturas").send(function(o){if(n.divPinturas.innerHTML="",o.error)app.Erro(o),semPinturas();else if(0<o.length){console.log(o.length);for(var a=0;a<o.length;a++)n._criandoPinturas(o[a],n.divPinturas)}else n.divPinturas.innerHTML="<h3>Sem pinturas</h3>"})},_criandoPinturas:function(o,a){app.CE();var n,t,i,r=app.CE("label",{class:"radio-azul diferenciado"}),e=app.CE("input",{value:o.id,type:"radio",class:"form-control cb-portas",name:"cor",id:o.id}),c=app.CE("i"),s=app.CE("figure"),p=app.CE("img",{src:"./img/loader.gif"}),l=app.CE("span",{class:"span"}),d=app.CE("span",{class:"span -little"});n=o,r.addEventListener("click",function(){orcamento7.pintura=n.id,orcamento7.tmpDados.pinturaDds=n,$(".botoes-form").addClass("-is-active")}),t=p,i=o.imagem,app.getImgFromApi(i,function(o,a){t.src=o}),l.innerHTML=o.nome,d.innerHTML=o.descricao,orcamento7._inserirPintura(r,e,c,s,p,l,d,a)},_inserirPintura:function(o,a,n,t,i,r,e,c){o.appendChild(a),o.appendChild(n),t.appendChild(i),o.appendChild(t),o.appendChild(r),o.appendChild(e),c.appendChild(o)},getFita:function(t){var o=orcamento7.tmpDados.tipoDeInstalacao,i=orcamento7.tmpDados.largura,r=orcamento7.tmpDados.quantidadeDePortas,e=orcamento7.tmpDados.fnAltura,c=orcamento7.tmpDados.porm2,s=orcamento7.tmpDados.peso_total;orcamento7.pintura?new Api("portoes/fitaPVC",{pintura_id:orcamento7.pintura}).send(function(a){if(a.error)app.Erro(a);else if(0<a.length)for(var n in a)orcamento7.calcForumlasProd(a[n],i,e,r,c,s,o,orcamento7.tmpDados.perfilID,orcamento7.tmpDados.modeloID,"condicao",function(o){console.log(o),1==o&&(orcamento7.tmpDados.fitaDds=a[n],t(a[n]))});else new Api("portoes/fitaPadrao").send(function(a){if(a.error)app.Erro(a);else if(0<a.length)for(var n in a)orcamento7.calcForumlasProd(a[n],i,e,r,c,s,o,orcamento7.tmpDados.perfilID,orcamento7.tmpDados.modeloID,"condicao",function(o){console.log(o),1==o&&(orcamento7.tmpDados.fitaDds=a[n],t(a[n]))})})}):new Api("portoes/fitaPadrao").send(function(a){if(a.error)app.Erro(a);else if(0<a.length)for(var n in a)orcamento7.calcForumlasProd(a[n],i,e,r,c,s,o,orcamento7.tmpDados.perfilID,orcamento7.tmpDados.modeloID,"condicao",function(o){console.log(o),1==o&&(console.log(a[n]),orcamento7.tmpDados.fitaDds=a[n],t(a[n]))})})},calcForumlasProd:function(o,a,n,t,i,r,e,c,s,p,l){var d,m=o[p||"formula"];m&&(d={ATT:n,LGP:a,ATP:orcamento7.tmpDados.fnAltura,PTP:t,PM2:i,PKG:r,PRF:c,MAT:s,TPI:e,VL:o.valor_unitario},app.addClasses("CalcFormula",function(){var o=new CalcFormula(m,d);l(o.calcula())})),l(m)},opcSimClick:function(){$(".botoes-form").removeClass("-is-active"),orcamento7.getPinturas()},opcNaoClick:function(){orcamento7.pintura=null,orcamento7.divPinturas.innerHTML="",$(".botoes-form").addClass("-is-active")},btnAvancarClick:function(o){o.preventDefault(),orcamento7.getFita(function(o){orcamento7.fita=o,orcamento7.tmpDados.pintura=orcamento7.pintura,orcamento7.tmpDados.fita=orcamento7.fita,new VarGlobal("informacoesGlobaisDeOrcamento").salvarLocal(JSON.stringify(orcamento7.tmpDados)),console.log(orcamento7.tmpDados),app.abrirPag("orcamento8",[orcamento7.tmpDados])})}};