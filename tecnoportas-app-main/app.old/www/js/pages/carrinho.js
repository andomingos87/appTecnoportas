"use strict";var carrinho={car:null,enviado:!1,acrescimos:null,listaProds:null,valor_total:null,btCli:null,vlTotal:0,inicializar:function(){app.securityCheck(),this.listaProds=app.E("listaProds"),this.btCli=app.E("btCli");var a=new VarGlobal("carrinho");this.car=JSON.parse(a.obterLocal()),console.log(this.car),carrinho.setProdutos(),this.btCli.addEventListener("click",function(){carrinho.onBtCliClick(carrinho.car)})},setProdutos:function(){if(console.log(this.listaProds),this.listaProds.innerHTML="",this.vlTotal=0,console.log(this.car.length),0<this.car.length){for(var a=0;a<this.car.length;a++)this.listaProds.appendChild(this.geraProdutos(this.car[a]));app.E("valor_total").innerHTML=carrinho.vlTotal,app.E("btCli").style.display="flex"}else console.log(this.listaProds),app.E("tableHead").style.display="none",app.E("btCli").style.display="none",app.E("valor_total").innerHTML=carrinho.vlTotal,this.listaProds.innerHTML="<h3>Nenhum produto encontrado</h3>"},geraProdutos:function(a){var i,r=app.CE("div",{class:"list-table",id:"prod"+a.id}),o=app.CE("img",{src:"./img/loader.gif",alt:a.nome,class:"w-100"}),n=app.CE("div",{class:"nome"}),l=app.CE("div",{class:"tipo"}),c=app.CE("div",{class:"preco"}),t=app.CE("div",{id:"divLixo"});return t.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' class='icon w-100 mg -bm-md' viewBox='0 0 24 28'><path fill='white' d='M8 11.5v9c0 0.281-0.219 0.5-0.5 0.5h-1c-0.281 0-0.5-0.219-0.5-0.5v-9c0-0.281 0.219-0.5 0.5-0.5h1c0.281 0 0.5 0.219 0.5 0.5zM12 11.5v9c0 0.281-0.219 0.5-0.5 0.5h-1c-0.281 0-0.5-0.219-0.5-0.5v-9c0-0.281 0.219-0.5 0.5-0.5h1c0.281 0 0.5 0.219 0.5 0.5zM16 11.5v9c0 0.281-0.219 0.5-0.5 0.5h-1c-0.281 0-0.5-0.219-0.5-0.5v-9c0-0.281 0.219-0.5 0.5-0.5h1c0.281 0 0.5 0.219 0.5 0.5zM18 22.813v-14.812h-14v14.812c0 0.75 0.422 1.188 0.5 1.188h13c0.078 0 0.5-0.438 0.5-1.188zM7.5 6h7l-0.75-1.828c-0.047-0.063-0.187-0.156-0.266-0.172h-4.953c-0.094 0.016-0.219 0.109-0.266 0.172zM22 6.5v1c0 0.281-0.219 0.5-0.5 0.5h-1.5v14.812c0 1.719-1.125 3.187-2.5 3.187h-13c-1.375 0-2.5-1.406-2.5-3.125v-14.875h-1.5c-0.281 0-0.5-0.219-0.5-0.5v-1c0-0.281 0.219-0.5 0.5-0.5h4.828l1.094-2.609c0.313-0.766 1.25-1.391 2.078-1.391h5c0.828 0 1.766 0.625 2.078 1.391l1.094 2.609h4.828c0.281 0 0.5 0.219 0.5 0.5z' style='width: 25px;height: 25px;'></path></svg>",carrinho.vlTotal=(parseFloat(carrinho.vlTotal)+parseFloat(a.valor_unitario)*parseInt(a.quantidade)).toFixed(2),null!=a.img?app.getImgFromApi(a.img,function(a){o.src=a}):o.src="./img/nenhum.png",n.innerHTML=a.nome,l.innerHTML=a.quantidade+"<br/>("+a.unidade_medida+")",c.innerHTML="R$ "+a.valor_unitario,i=a,t.addEventListener("click",function(){carrinho.removeCart(i.id,i.nome)}),r.appendChild(o),r.appendChild(n),r.appendChild(l),r.appendChild(c),r.appendChild(t),console.log(r),r},removeCart:function(a,i){if(0==carrinho.enviado){var r=new VarGlobal("carrinho");carrinho.car=JSON.parse(r.obterLocal());for(var o=0;o<carrinho.car.length;o++)console.log(carrinho.car[o].id),carrinho.car[o].id==a&&(console.log(carrinho.car[o].id),carrinho.car.splice(o,1),new Mensagem(i+" : removido do carrinho",!0),r.salvarLocal(JSON.stringify(carrinho.car)),carrinho.setProdutos())}},onBtCliClick:function(a){app.abrirPag("orcamento1",[{origem:"carrinho",dados:a}])}};