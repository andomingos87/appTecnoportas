"use strict";var orcamento5={tipoAciona:null,motor:null,testeira:null,autSelecionado:0,btnAvancar:null,btnVoltar:null,inicializar:function(){app.securityCheck(),this.btnAvancar=app.E("btnAvancar"),this.btnVoltar=app.E("btnlVoltar"),this.motor=0,this.testeira=0;var o=new VarGlobal("informacoesGlobaisDeOrcamento").obterLocal();this.nTmpLocal=JSON.parse(o),console.log(this.nTmpLocal),this.tipoAciona=app.E("tipoAciona"),this._pegandoAutomatizadores(),this.btnAvancar.addEventListener("click",this.btnAvancarClick),this.btnVoltar.addEventListener("click",app.onBackButtonClick)},_pegandoAutomatizadores:function(){new Api("motores",{categoria:orcamento5.nTmpLocal.idCatMotor},!0,!0).send(function(a){var o=orcamento5.nTmpLocal.tipoDeInstalacao,n=app.N(orcamento5.nTmpLocal.quantidadeDePortas),t=app.N(orcamento5.nTmpLocal.largura),r=app.N(orcamento5.nTmpLocal.fnAltura),e=app.N(orcamento5.nTmpLocal.porm2);if(!a.error&&0<a.length){for(var i in a)orcamento5._calcForumlasProd(a[i],t,r,n,e,orcamento5.nTmpLocal.peso_total,o,"condicao",function(o){1==o&&(orcamento5.motor=a[i],orcamento5.nTmpLocal.motorDds=orcamento5.motor)});setTimeout(function(){var o;0==orcamento5.motor&&((o=new Mensagem("N達o encontramos motores adequados para seu port達o!")).setTipo("confirma"),o.setBotoes(["Voltar","Cancelar"]),o.mostrar(function(o){1==o?app.onBackButtonClick():app.abrirPag("home",[],!1)})),new Api("motores/testeiras",{motor_id:orcamento5.motor.id},!0,!0).send(function(o){o.error?app.Erro(o):0<o.length?(orcamento5.testeira=o[0],orcamento5.nTmpLocal.testeiraDds=orcamento5.testeira,orcamento5.tipoAciona.innerHTML="",orcamento5.getAutoms()):((o=new Mensagem("N達o encontramos a testeira adequada para seu port達o!")).setTipo("confirma"),o.setBotoes(["Voltar","Cancelar"]),o.mostrar(function(o){1==o?app.onBackButtonClick():app.abrirPag("home",[],!1)}))})},1e3)}})},_calcForumlasProd:function(o,a,n,t,r,e,i,c,p){var m,l,s=o[c||"formula"];s&&(c=orcamento5.nTmpLocal.perfilID,m=orcamento5.nTmpLocal.modeloID,l={ATT:orcamento5.nTmpLocal.altura,LGP:a,ATP:n,PTP:t,PM2:r,PKG:e,PRF:c,MAT:m,TPI:i,VL:o.valor_unitario},app.addClasses("CalcFormula",function(){var o=new CalcFormula(s,l);p(o.calcula())})),p(s)},getAutoms:function(){Loader.mostrar(),new Api("motores/automatizadores",null,!0,!0).send(function(o){if(orcamento5._criandoAutomatizadoresVazio(orcamento5.tipoAciona),o.error)app.Erro(o);else if(0<o.length)for(var a=0;a<o.length;a++)n=o[a],orcamento5._criandoAutomatizadores(n,orcamento5.tipoAciona);var n}),Loader.remover()},_criandoAutomatizadores:function(o,a){var n=app.CE("img",{src:"http://apptecnoportas.com.br/files?name="+o.imagem}),t=app.CE("div",{class:"opcao"}),r=app.CE("label",{class:"radio-azul"}),e=app.CE("span"),i=app.CE("i"),c=app.CE("input",{value:o.id,type:"radio",class:"form-control cb-portas",name:"modelos",id:o.id});e.innerHTML=o.nome,orcamento5._inserirAutomatizador(t,r,e,c,i,n,a,o)},_criandoAutomatizadoresVazio:function(o){var a=app.CE("img",{src:"img/nenhum.png"}),n=app.CE("div",{class:"opcao"}),t=app.CE("label",{class:"radio-azul"}),r=app.CE("span"),e=app.CE("i"),i=app.CE("input",{value:"0",type:"radio",class:"form-control cb-portas",name:"modelos",id:"nenhum_aut"});r.innerHTML="Nenhum",orcamento5._inserirAutomatizador(n,t,r,i,e,a,o,null)},_inserirAutomatizador:function(o,a,n,t,r,e,i,c){var p,m;null!=e&&a.appendChild(e),a.appendChild(n),a.appendChild(t),a.appendChild(r),o.appendChild(a),i.appendChild(o),p=t,m=c,a.addEventListener("click",function(){orcamento5.autSelecionado=p.value,orcamento5.nTmpLocal.autDds=m,$(".botoes-form").addClass("-is-active")})},btnAvancarClick:function(o){o.preventDefault(),orcamento5.nTmpLocal.automatizador_id=orcamento5.autSelecionado,new VarGlobal("informacoesGlobaisDeOrcamento").salvarLocal(JSON.stringify(orcamento5.nTmpLocal)),app.abrirPag("orcamento6",[orcamento5.nTmpLocal])}};